{
    "swagger": "2.0",
    "info": {
        "description": "API Hỗ trợ du lịch",
        "version": "1.0.0",
        "title": "Smartourist App"
    },
    "schemes": {
        "http": "http",
        "https": "https"
    },
    "securityDefinitions": {
        "bearerAuth": {
            "name": "Authorization",
            "in": "header",
            "type": "apiKey",
            "description": "Bearer {token}"
        }
    },
    "security": [
        {
            "bearerAuth": []
        }
    ],
    "paths": {
        "/api/user/sendMail": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Send mail to user",
                "description": "Gửi mail cho người dùng",
                "operationId": "sendMail",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "Send Mail",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/SendMail"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/SendMail"
                        }
                    },
                    "400": {
                        "description": "Bad Request"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/api/user/createUser": {
            "post": {
                "tags": [
                    "User"
                ],
                "summary": "Create User",
                "description": "Create User",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                
                "responses": {
                    "200": {
                        "description": "User added to the store",
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    },
                    "400": {
                        "description": "Invalid user supplied"
                    }
                }
            }
        },
        "/api/user/getAllUsers": {
            "get": {
                "tags": [
                    "User"
                ],
                "summary": "Lấy ra tất cả user",
                "description": "Để lấy ra tất cả user cần phải đăng nhập với quyền admin",
                "produces": [
                    "application/json"
                ],
                "responses": {
                    "200": {
                        "description": "Successfully",
                        "schema": {
                            "$ref": [
                                "#/definitions/Account_res"
                            ]
                        }
                    },
                    "404": {
                        "description": "NOT_FOUND"
                    }
                }
            }
        },
        "/api/user/getUser": {
            "get": {
                "tags": [
                    "User"
                ],
                "summary": "Tìm user với mã UID",
                "description": "Trả về 1 người dùng và thông tin của người dùng",
                "operationId": "getUserById",
                "produces": [
                    "application/json"
                ],
               
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "USER NOT FOUND"
                    }
                }
            }
        },
        "/api/auth/forgot-password":{
            "post":{
                "tags":["Auth"],
                "summary":"Quên Mật Khẩu"
            }
        },
        "/api/auth/sendEmailResetPassword":{
            "post":{
                "tags":["Auth"],
                "summary":"Gửi mail quên mật khẩu"
            }
        },
        "/api/auth/checkObbCodeResetPassword":{
            "post":{
                "tags":["Auth"],
                "summary":"Kiểm tra mã OBB Code Reset Password"
            }
        },
        "/api/auth/verifyResetPassword":{
            "post":{
                "tags":["Auth"],
                "summary":"Xác nhận reset password"
            }
        },
        "/api/user/uploadAvatar": {
            "post": {
                "tags": [
                    "User"
                ],
                "summary": "Upload avatar",
                "description": "Upload avatar",
                "produces": [
                    "application/json"
                ],
                "consumes": [
                    "multipart/form-data"
                ],
                "parameters": [
                  
                    {
                        "name": "avatar",
                        "in": "formData",
                        "description": "File",
                        "required": true,
                        "type": "file"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully",
                        "schema": {
                            "$ref": "#/definitions/Avatar_res"
                        },
                        "examples": {
                            "$ref": "#/definitions/Avatar_res"
                        }
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "USER NOT FOUND"
                    }
                }
            }
        },

        
        "/api/admin/setAdmin": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Set admin",
                "description": "Set admin",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "uid",
                        "in": "query",
                        "description": "Mã uid của user",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "USER NOT FOUND"
                    }
                }
            }
        },
        "/api/admin/removeAdmin": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Revoke admin",
                "description": "Revoke admin",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "uid",
                        "in": "query",
                        "description": "Mã uid của user",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "USER NOT FOUND"
                    }
                }
            }
        },
        "/api/admin/revokeToken": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Revoke Token ",
                "description": "Thu hồi mã token của user",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "uid",
                        "in": "query",
                        "description": "Mã uid của user",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "USER NOT FOUND"
                    }
                }
            }
        },
     
      
        "/api/user/updateUser": {
            "put": {
                "tags": [
                    "User"
                ],
                "summary": "Sửa thông tin người dùng",
                "description": "Người dùng dùng api này cập nhật thông tin của mình",
                "operationId": "editUser",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                  
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Thông tin cần cập nhật của user",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/edit_user_res"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User edit successfully",
                        "schema": {
                            "$ref": "#/definitions/edit_user_res"
                        },
                        "examples": {
                            "$ref": "#/definitions/Account_res"
                        }
                    },
                    "400": {
                        "description": "Check Password again or is short"
                    },
                    "404": {
                        "description": "User not found"
                    }
                }
            }
        },
        "/api/user/deleteUser": {
            "delete": {
                "tags": [
                    "User"
                ],
                "summary": "Xóa người dùng",
                "description": "Chỉ admin mới có thể xóa người dùng",
                "operationId": "deleteUser",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "uid",
                        "in": "query",
                        "description": "Mã uid của user",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "USER NOT FOUND"
                    }
                }
            }
        },
        "/api/auth/signup": {
            "post": {
                "tags": [
                    "Account"
                ],
                "summary": "Sign Up With Email and Password",
                "description": "Sign Up With Email and Password",
                "operationId": "Sign Up",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "User",
                        "in": "body",
                        "description": "Đăng kí người dùng với email và mật khẩu",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Account"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User created successfully",
                        "schema": {
                            "$ref": "#/definitions/Account_res"
                        },
                        "examples": {
                            "$ref": "#/definitions/Account_res"
                        }
                    },
                    "400": {
                        "description": "Check email Already Exist || Password is too short"
                    },
                    "404": {
                        "description": "User not found"
                    }
                }
            }
        },
        "/api/auth/signin": {
            "post": {
                "tags": [
                    "Account"
                ],
                "summary": "Login With Email and Password",
                "description": "Login With Email and Password",
                "operationId": "Login",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "User",
                        "in": "body",
                        "description": "Đăng nhập người dùng với email và mật khẩu",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Account"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User created successfully",
                        "schema": {
                            "$ref": "#/definitions/Account_res"
                        },
                        "examples": {
                            "$ref": "#/definitions/Account_res"
                        }
                    },
                    "400": {
                        "description": "Check email Already Exist || Password is too short"
                    },
                    "404": {
                        "description": "User not found"
                    }
                }
            }
        },
        "/api/maps/findLatLongLocation": {
            "get": {
                "tags": [
                    "Maps"
                ],
                "summary": "Tìm kiếm kinh độ vĩ độ của địa điểm",
                "description": "Vui lòng nhập đầy đủ liên kết địa chỉ và api key",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "address",
                        "in": "query",
                        "description": "Liên kết địa chỉ shared address",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    },
                    {
                        "name": "apiKey",
                        "in": "query",
                        "description": "Khoá API Key của google Maps cung cấp",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    }
                    
                ],
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "USER NOT FOUND"
                    }
                }
            }
        },
        "/api/maps/findAutoLocation": {
            "get": {
                "tags": [
                    "Maps"
                ],
                "summary": "Tìm địa chỉ với autocompleted",
                "description": "Tìm địa chỉ nhanh chóng",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "place",
                        "in": "query",
                        "description": "Địa điểm bằng chữ (tìm kiếm gần đúng)",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    },
                    {
                        "name": "apiKey",
                        "in": "query",
                        "description": "Khoá API Key của google Maps cung cấp",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "USER NOT FOUND"
                    }
                }
            }
        },
        "/api/maps/findImageLocation": {
            "get": {
                "tags": [
                    "Maps"
                ],
                "summary": "Tìm kiếm hình ảnh của địa điểm bất kì",
                "description": "Cần có hình ảnh mã hóa bằng code photoreference",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "photoRef",
                        "in": "query",
                        "description": "Mã ảnh của google maps cung cấp",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    },
                    {
                        "name": "apiKey",
                        "in": "query",
                        "description": "Khoá API Key của google Maps cung cấp",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "USER NOT FOUND"
                    }
                }
            }
        },
        "/api/maps/findRefPlacesWithText":{
            "get": {
                "tags": [
                    "Maps"
                ],
                "summary": "API chỉ đường",
                "description": "Nhập đầy đủ tham số vào để tìm chỉ đường",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "place",
                        "in": "query",
                        "description": "Tìm địa chỉ chi tiết",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    },
                    {
                        "name": "apiKey",
                        "in": "query",
                        "description": "Khoá API Key của google Maps cung cấp",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "USER NOT FOUND"
                    }
                }
            }
        },
        "/api/maps/getDirection": {
            "get": {
                "tags": [
                    "Maps"
                ],
                "summary": "API chỉ đường",
                "description": "Nhập đầy đủ tham số vào để tìm chỉ đường",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "origin",
                        "in": "query",
                        "description": "Địa điểm bắt đầu",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    },
                    {
                        "name": "destination",
                        "in": "query",
                        "description": "Địa điểm Kết thúc",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    }, 
                    {
                        "name": "apiKey",
                        "in": "query",
                        "description": "Khoá API Key của google Maps cung cấp",
                        "required": true,
                        "type": "string",
                        "format": "string"
                    }, 
                      
                    {
                        "name": "mode",
                        "in": "query",
                        "description": "{ driving(lái xe (mặc định)) ,walking (Đi bộ) ,bicycling (xe đạp), transit (chuyển tuyến) }",
                        "required": false,
                        "type": "string",
                        "format": "string"
                    },
                    {
                        "name": "avoid",
                        "in": "query",
                        "description": "avoid (tránh)={tolls (trạm thu phí),highways(đường cao tốc) ,ferries(phà)  }",
                        "required": false,
                        "type": "string",
                        "format": "string"
                    }
                      
                ],
              
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "USER NOT FOUND"
                    }
                }
            }
        },
        "/api/profile/getProfile":{
            "get": {
                "tags": [
                    "Profile"
                ],
                "summary": "Lấy ra profile của 1 user",
                "description": "Trả về 1  thông tin  hồ sơ của người dùng",
                "operationId": "getProfileByUID",
                "produces": [
                    "application/json"
                ],
              
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "PROFILE NOT FOUND"
                    }
                }
            }
        },
        "/api/profile/createProfile":{
            "post": {
                "tags": [
                    "Profile"
                ],
                "summary": "Tạo profile của 1 user",
                "description": "Tạo 1  thông tin  hồ sơ của người dùng",
                "operationId": "create Profile User",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "Create Profile",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Profile"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "PROFILE NOT FOUND"
                    }
                }
            }
        },
        "/api/profile/updateProfile":{
            "put": {
                "tags": [
                    "Profile"
                ],
                "summary": "Tạo profile của 1 user",
                "description": "Tạo 1  thông tin  hồ sơ của người dùng",
                "operationId": "create Profile User",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "Create Profile",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Profile"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully"
                    },
                    "400": {
                        "description": "Invalid UID supplied"
                    },
                    "404": {
                        "description": "PROFILE NOT FOUND"
                    }
                }
            }
        },
        "/api/profile/deleteProfile":{
        }
    },
    "definitions": {
        "SendMail": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email của người dùng cần gửi",
                    "required": true,
                    "example": "toExample@gmail.com"
                },
                "subject": {
                    "type": "string",
                    "format": "string",
                    "description": "Tiêu đề của email",
                    "required": true,
                    "example": "Tiêu đề của email"
                },
                "text": {
                    "type": "string",
                    "format": "string",
                    "description": "Nội dung của email",
                    "required": true,
                    "example": "Nội dung của email"
                },
                "html": {
                    "type": "string",
                    "format": "string",
                    "description": "Nội dung của email",
                    "required": true,
                    "example": "Nội dung của email"
                }
            }
        },
        "Create_user": {
            "type": "object",
            "properties": {
                "displayName": {
                    "type": "string",
                    "description": "Tên người dùng"
                },
                "email": {
                    "type": "string",
                    "description": "Email người dùng"
                },
                "photoURL": {
                    "type": "string",
                    "description": "Địa chỉ hình ảnh của user"
                },
                "phoneNumber": {
                    "type": "string",
                    "description": "Số điện thoại người dùng",
                    "example": "+987654321"
                }
            }
        },
        "Account": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string",
                    "description": "Email"
                },
                "password": {
                    "type": "string",
                    "description": "Password"
                }
            }
        },
        "Account_res": {
            "type": "object",
            "properties": {
                "uid": {
                    "type": "string",
                    "description": "Mã uid"
                },
                "email": {
                    "type": "string",
                    "description": "Email",
                    "example": "email@gmail.com"
                },
                "phoneNumber": {
                    "type": "string",
                    "description": "+84..........",
                    "example": "+84123456789"
                },
                "displayName": {
                    "type": "string",
                    "description": "Tên hiển thị",
                    "example": "Nguyen Van A"
                },
                "photoURL": {
                    "type": "string",
                    "description": "Đường dẫn ảnh",
                    "example": "https://firebasestorage.googleapis.com/v0/b/test-firebase-auth.appspot.com/o/images%2F1569098984686.jpg?alt=media"
                },
                "emailVerified": {
                    "type": "boolean",
                    "description": "Email đã được xác nhận",
                    "example": false
                },
                "disabled": {
                    "type": "boolean",
                    "description": "Tài khoản đã bị vô hiệu hóa",
                    "example": false
                }
            }
        },
        "ColumnFilter": {
            "type": "object",
            "properties": {
              "column": {
                "type": "string",
                "nullable": true
              },
              "value": {
                "type": "string",
                "nullable": true
              }
            },
            "additionalProperties": false
          
        },
        "Profile": {
            "type": "object",
            "properties": {
                "dateOfBirth": {
                    "type": "string",
                    "description": "Ngày tháng năm sinh người dùng.",
                    "example": "new Date(2002,12,11)"
                },
                "user": {
                    "type": "string",
                    "description": "Object Id người dùng",
                    "example": "ObjectId"
                },
                "address": {
                    "type": "string",
                    "example": "93/34B kp5"
                },
                "albums": {
                    "type": "string",
                    "example": "ALBUMS HÌNH Anh"
                },
                "sex": {
                    "type": "string",
                    "description": "Giới tính.",
                    "example": "Bê Đê"
                },
                "first_name": {
                    "type": "string",
                    "description": "Họ và tên đệm.",
                    "example": "Hoàng Hải"
                },
                "last_name": {
                    "type": "string",
                    "description": "Tên.",
                    "example": "Dương"
                },
                "state": {
                    "type": "string",
                    "description": " Mã Nhà nước.",
                    "example": "71999"
                },
                "country": {
                    "type": "string",
                    "description": "Quốc Gia",
                    "example": "Việt Nam"
                },
                "zip_code": {
                    "type": "string",
                    "description": "Mã bưu điện",
                    "example": "81000"
                },
                "color": {
                    "type": "string",
                    "description": "Màu Người Dùng.",
                    "example": "orange"
                }
            }
        }
    }
}